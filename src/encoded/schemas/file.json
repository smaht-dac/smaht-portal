{
    "title": "File",
    "description": "Schema for submitting metadata for a file.",
    "id": "/profiles/file.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": [
        "category",
        "data_type",
        "file_name",
        "file_format"
    ],
    "anyOf": [
        {
            "required": [
                "submission_centers"
            ]
        },
        {
            "required": [
                "consortia"
            ]
        }
    ],
    "allOf": [
        {
            "anyOf": [
                {
                    "not": {
                        "properties": {
                            "category": {
                                "enum": [
                                    "submitted"
                                ]
                            }
                        }
                    }
                },
                {
                    "required": [
                        "identifier"
                    ]
                }
            ]
        }
    ],
    "identifyingProperties": [
        "accession",
        "aliases",
	"identifier",
        "uuid"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/aliases"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/category"
        },
        {
            "$ref": "mixins.json#/description"
        },
        {
            "$ref": "mixins.json#/identifier"
        },
        {
            "$ref": "mixins.json#/modified"
        },
        {
            "$ref": "mixins.json#/schema_version"
        },
        {
            "$ref": "mixins.json#/status"
        },
        {
            "$ref": "mixins.json#/submitted"
        },
        {
            "$ref": "mixins.json#/tags"
        },
        {
            "$ref": "mixins.json#/uuid"
        }
    ],
    "properties": {
        "accession": {
            "accessionType": "FI"
        },
        "category": {
            "enum": [
                "submitted",
                "processed",
                "reference"
            ]
        },
        "status": {
            "default": "uploading",
            "enum": [
                "uploading",
                "uploaded",
                "upload failed",
                "to be uploaded by workflow",
                "current",
                "shared",
                "replaced",
                "in review",
                "obsolete",
                "inactive",
                "archived",
                "deleted"
            ]
        },
        "data_type": {
            "title": "Data type",
            "description": "Type of information in the file",
            "type": "string",
            "enum": []
        },
        "file_format": {
            "title": "File Format",
            "type": "string",
            "enum": [
                "bam",
                "fastq",
                "vcf"
            ]
        },
        "file_name": {
            "title": "File Name",
            "description": "The local file name used at time of submission",
            "type": "string",
            "pattern": "^[\\w+=,.@-]*$"
        },
        "file_size": {
            "title": "File Size",
            "exclude_from": [
                "FFedit-create"
            ],
            "description": "Size of file on disk in bytes",
            "type": "integer"
        },
        "md5sum": {
            "title": "MD5sum",
            "description": "The md5sum of the file being transferred",
            "comment": "This can vary for files of same content gzipped at different times",
            "type": "string",
            "exclude_from": [
                "FFedit-create"
            ],
            "ff_flag": "clear edit",
            "format": "hex"
        },
        "content_md5sum": {
            "title": "Content MD5sum",
            "description": "The MD5sum of the uncompressed file",
            "comment": "This is only relavant for gzipped files",
            "type": "string",
            "exclude_from": [
                "FFedit-create"
            ],
            "format": "hex",
            "uniqueKey": "file:content_md5sum"
        },
        "derived_from": {
            "title": "Derived From",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "File",
                "type": "string",
                "linkTo": "File"
            }
        },
        "paired_with": {
            "title": "Paired with",
            "type": "string",
            "linkTo": "File"
        },
        "supercedes": {
            "title": "Supercedes",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "File",
                "type": "string",
                "linkTo": "File"
            }
        },
        "quality_metrics": {
            "title": "Quality Metrics",
            "type": "array",
            "uniqueItems": true,
            "items": {
                "title": "Quality Metric",
                "type": "string",
                "linkTo": "QualityMetric"
            }
        }
    },
    "facets": {},
    "columns": {}
}
