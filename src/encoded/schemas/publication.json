{
    "title": "Publication",
    "description": "Consortium publications",
    "$id": "/profiles/publication.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "required": [
        "doi"
    ],
    "anyOf": [
        {
            "required": [
                "submission_centers"
            ]
        },
        {
            "required": [
                "consortia"
            ]
        }
    ],
    "identifyingProperties": [
        "accession",
        "aliases",
        "identifier",   
        "uuid"        
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "mixins.json#/accession"
        },
        {
            "$ref": "mixins.json#/aliases"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/modified"
        },
        {
            "$ref": "mixins.json#/schema_version"
        },
        {
            "$ref": "mixins.json#/static_embeds"
        },
        {
            "$ref": "mixins.json#/status"
        },
        {
            "$ref": "mixins.json#/submitted"
        },
        {
            "$ref": "mixins.json#/tags"
        },
        {   
            "$ref": "mixins.json#/uuid"
        }
    ],
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "accession": {
            "accessionType": "PB"
        },
        "doi": {
            "title": "DOI",
            "description": "DOI for the publication or preprint",
            "type": "string",
            "comment": "Please provide in the form of doi:10.1234/abc123"
        },
        "pubmed_id":{
            "title": "Publication Identifier",
            "description": "PMID for the publication (if available).",
            "type": "string",
            "comment": "Please provide in the form of PMID:12345678"
        },
        "title": {
            "title": "Title",
            "description": "Title of the article",
            "type": "string",
            "permission": "restricted_fields"
        },
        "abstract": {
            "title": "Abstract",
            "description": "Abstract of the publication.",
            "type": "string",
            "permission": "restricted_fields",
            "formInput": "textarea"
        },
        "authors": {
            "title": "Authors",
            "description": "All authors, with format Bernstein BE, Birney E, Dunham I,...",
            "type": "array",
            "items": {
                "title": "Author",
                "type": "string"
            },
            "permission": "restricted_fields"
        },
        "code_repositories": {
            "title": "Code Repositories",
            "description": "Links to code repositories associated with this publication.",
            "type": "array",
            "items": {
                "type": "string",
                "format": "uri"
            }
        },
        "date_published": {
            "title": "Publication Date",
            "type": "string",
            "permission": "restricted_fields"
        },
        "is_preprint": {
            "title": "Is Preprint",
            "description": "Indicates whether the publication is a preprint.",
            "type": "boolean",
            "permission": "restricted_fields"
        },        
        "journal": {
            "title": "Journal",
            "description": "Name of the journal in which the article was published.",
            "type": "string",
            "permission": "restricted_fields"
        },
        "journal_url": {
            "title": "Journal URL",
            "description": "Link to the publishing journal web site.",
            "type": "string",
            "format": "uri",
            "permission": "restricted_fields"
        },
        "repository_url": {
            "title": "Repository URL",
            "description": "Link to the repository (e.g. bioRxiv, PubMed) web site.",
            "type": "string",
            "format": "uri",
            "permission": "restricted_fields"
        },
        "preprint_version": {
            "title": "Version",
            "description": "Version of the record as it appears in the external database (e.g. bioRxiv version)",
            "type": "string",
            "permission": "restricted_fields"
        },
        "previous_repository_urls": {
            "title": "Previous Repository URLs",
            "description": "Links to previous versions of the publication in external repositories.",
            "type": "array",
            "items": {
                "type": "string",
                "format": "uri"
            },
            "permission": "restricted_fields"
        },
        "study": {
            "title": "Study",
            "description": "Study associated with this publication.",
            "type": "string",
            "enum": ["Benchmarking", "Production"]
        },
        "scope": {
            "title": "Scope",
            "description": "Scope of the publication.",
            "type": "string",
            "enum": ["Working group", "Network", "Individual Lab"]
        },
        "working_group_name": {
            "title": "Working Group Name",
            "description": "For publications with scope 'Working group' the name of the WG that produced the publication",
            "type": "string",
            "enum": [
                "SNV/Indel Working Group",
                "SV",
                "MEI",
                "Genome Assembly",
                "Duplex-Seq",
                "Single-cell",
                "Functional"
            ]
        }
    },
    "facets": {
        "journal": {
            "title": "Journal"
        }
    },
    "columns": {
        "display_title": {
            "title": "Title",
            "sort_fields": [
                {
                    "field": "title",
                    "title": "Publication Title"
                },
                {
                    "field": "display_title",
                    "title": "Author Name"
                }
            ],
            "default_hidden": true
        },
        "date_published": {
            "title": "Year",
            "default_hidden": true
        },
        "journal": {
            "title": "Journal",
            "default_hidden": true
        },
        "number_of_files": {
            "title": "Number of Files",
            "default_hidden": true
        }
    }
}
